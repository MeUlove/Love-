#include<iostream>
#include<cstdio>
#include<cstring>
#include<cmath>
#include<algorithm>
using namespace std;
int n,q;
int s[200010];
struct shu
{
    int l;
    int r;
    long long sum;
    long long lazy;
}e[1000010];

void buildshu(int l,int r,int o)
{
    e[o].l=l;
    e[o].r=r;
    e[o].lazy=0;
    if(l==r)
    {
        e[o].sum=s[l];
        return;
    }
    int oo=o*2;
    int mid=(l+r)/2;
    buildshu(l,mid,oo);
    buildshu(mid+1,r,oo+1);
    e[o].sum=e[oo].sum+e[oo+1].sum;
    return;
}

void gaibian(int l,int r,int w,int o)
{
    int oo=o*2;
    int mid=(e[o].l+e[o].r)/2;
    if(e[o].l==l&&e[o].r==r)
    {
        e[o].sum+=(r-l+1)*w;
        if(e[o].l!=e[o].r)
        {
            e[oo].lazy+=w;
        	e[oo+1].lazy+=w;
        }	
        return;
    }
    if(r<=mid)gaibian(l,r,w,oo);
    if(l>mid)gaibian(l,r,w,oo+1);
    if(l<=mid&&r>mid)
    {
        gaibian(l,mid,w,oo);
        gaibian(mid+1,r,w,oo+1);
    }
    e[o].sum+=(r-l+1)*w;
    return;
}
long long wen(int l,int r,int o)
{
    int oo=o*2;
    int mid=(e[o].l+e[o].r)/2;
    if(e[o].lazy!=0)
    {
        e[o].sum+=(e[o].r-e[o].l+1)*e[o].lazy;
        if(e[o].l!=e[o].r)
        {
            e[oo].lazy+=e[o].lazy;
        	e[oo+1].lazy+=e[o].lazy;
        }
        e[o].lazy=0;
    }
    if(e[o].l==l&&e[o].r==r)return e[o].sum;
    if(r<=mid)return wen(l,r,oo);
    if(l>mid)return wen(l,r,oo+1);
    if(r>mid&&l<=mid)return wen(l,mid,oo)+wen(mid+1,r,oo+1);
    return 0;
}
int main()
{
    scanf("%d",&n);
    scanf("%d",&q);
    for(int i=1;i<=n;i++)scanf("%d",&s[i]);
    buildshu(1,n,1);
    for(int i=1;i<=q;i++)
    {
        int z;
        scanf("%d",&z);
        if(z==1)
        {
            int a,b,x;
            scanf("%d %d %d",&a,&b,&x);
            gaibian(a,b,x,1);
        }
        else if(z==2)
        {
            int a,b;
            scanf("%d %d",&a,&b);
            printf("%lld\n",wen(a,b,1));
        }
    }
    return 0;
}
